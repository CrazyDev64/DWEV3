<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extractor de Imágenes - The Binding of Isaac</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a9a9a9;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .instructions, .output {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        h2 {
            color: #4ecdc4;
            margin-bottom: 15px;
            border-bottom: 2px solid #4ecdc4;
            padding-bottom: 10px;
        }
        
        ol, ul {
            margin-left: 20px;
            margin-bottom: 20px;
        }
        
        li {
            margin-bottom: 10px;
        }
        
        code {
            background: rgba(0, 0, 0, 0.5);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .button {
            display: inline-block;
            background: #ff6b6b;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            margin: 10px 5px;
        }
        
        .button:hover {
            background: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        .button.secondary {
            background: #4ecdc4;
        }
        
        .button.secondary:hover {
            background: #3db8b0;
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        }
        
        textarea {
            width: 100%;
            height: 200px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #444;
            border-radius: 5px;
            color: white;
            padding: 15px;
            font-family: monospace;
            resize: vertical;
        }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .image-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .image-item:hover {
            transform: scale(1.05);
        }
        
        .image-item img {
            max-width: 100%;
            border-radius: 5px;
        }
        
        .image-name {
            margin-top: 8px;
            font-size: 0.85rem;
            word-break: break-word;
        }
        
        .note {
            background: rgba(255, 193, 7, 0.2);
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #a9a9a9;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Extractor de Imágenes - The Binding of Isaac</h1>
            <p class="subtitle">Herramienta para extraer imágenes de la sección "Items" de tboi.com/original</p>
        </header>
        
        <div class="content">
            <div class="instructions">
                <h2>Instrucciones</h2>
                <ol>
                    <li>Abre la página <a href="https://tboi.com/original" target="_blank">https://tboi.com/original</a> en tu navegador</li>
                    <li>Navega hasta la sección de "Items"</li>
                    <li>Haz clic derecho en la página y selecciona "Inspeccionar elemento"</li>
                    <li>En la consola de desarrollador, ejecuta el siguiente código:</li>
                </ol>
                
                <textarea id="codeSnippet" readonly>
// Función mejorada para extraer imágenes que evita el error de foco
function extractItemImages() {
    // Busca todas las imágenes en la página
    let images = document.querySelectorAll('img');
    
    // Filtra las imágenes que probablemente sean items
    let itemImages = Array.from(images).filter(img => {
        return img.src && (
            img.src.includes('item') || 
            img.alt.toLowerCase().includes('item') ||
            (img.parentElement && img.parentElement.className.includes('item')) ||
            img.className.includes('item')
        );
    });
    
    // Si no encuentras imágenes con estos filtros, prueba selectores más específicos
    if (itemImages.length === 0) {
        // Intentar con selectores comunes para secciones de items
        itemImages = document.querySelectorAll('#items img, .items img, .item img, [class*="item"] img');
    }
    
    // Crear un array con las URLs de las imágenes
    let imageUrls = Array.from(itemImages).map(img => img.src);
    
    // Mostrar las URLs en la consola
    console.log('URLs de imágenes encontradas:');
    console.log(JSON.stringify(imageUrls, null, 2));
    
    // Crear un elemento de texto para copiar manualmente
    let pre = document.createElement('pre');
    pre.textContent = JSON.stringify(imageUrls, null, 2);
    pre.style.cssText = 'background: #f5f5f5; padding: 10px; border: 1px solid #ccc; max-height: 300px; overflow: auto;';
    document.body.appendChild(pre);
    
    // Intentar copiar al portapapeles solo si tenemos interacción del usuario
    try {
        // Crear un área de texto temporal
        let textArea = document.createElement('textarea');
        textArea.value = JSON.stringify(imageUrls, null, 2);
        document.body.appendChild(textArea);
        textArea.select();
        
        let successful = document.execCommand('copy');
        document.body.removeChild(textArea);
        
        if(successful) {
            console.log('URLs copiadas al portapapeles!');
        } else {
            console.log('No se pudo copiar automáticamente. Copia manualmente el texto de arriba.');
        }
    } catch (err) {
        console.log('No se pudo copiar automáticamente. Copia manualmente el texto que aparece en la página.');
    }
    
    return imageUrls;
}

// Ejecutar la función
extractItemImages();
                </textarea>
                
                <button class="button" onclick="copyCode()">Copiar Código</button>
                
                <div class="note">
                    <strong>Nota Mejorada:</strong> Este código mejorado intentará múltiples métodos para encontrar imágenes y también creará un elemento en la página con las URLs para que puedas copiarlas manualmente si falla la copia automática.
                </div>
                
                <h2>Pegar URLs de Imágenes</h2>
                <p>Pega las URLs que obtuviste en la consola:</p>
                <textarea id="imageUrls" placeholder="Pega aquí las URLs de las imágenes en formato de array JSON, por ejemplo: [&quot;https://...&quot;, &quot;https://...&quot;]"></textarea>
                <button class="button secondary" onclick="loadImages()">Cargar Imágenes</button>
                
                <div class="note">
                    <strong>Solución al Error de Foco:</strong> Si ves el error "Document is not focused", el código mejorado creará un elemento en la página con las URLs para que puedas copiarlas manualmente.
                </div>
            </div>
            
            <div class="output">
                <h2>Imágenes Extraídas</h2>
                <div id="imageContainer" class="image-grid">
                    <p id="noImagesMessage">Las imágenes aparecerán aquí después de cargarlas.</p>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="button" onclick="downloadAll()">Descargar Todas las Imágenes</button>
                    <button class="button secondary" onclick="clearImages()">Limpiar</button>
                </div>
                
                <div class="note">
                    <strong>Importante:</strong> Debido a las políticas de CORS, algunas imágenes podrían no mostrarse correctamente. En ese caso, puedes descargarlas individualmente haciendo clic derecho sobre cada imagen.
                </div>
            </div>
        </div>
        
        <footer>
            <p>Esta herramienta es solo para uso educativo. Respeta los derechos de autor del contenido.</p>
            <p>© 2023 - Extractor de Imágenes TBOI</p>
        </footer>
    </div>

    <script>
        function copyCode() {
            const codeSnippet = document.getElementById('codeSnippet');
            codeSnippet.select();
            document.execCommand('copy');
            alert('Código copiado al portapapeles');
        }
        
        function loadImages() {
            const urlsText = document.getElementById('imageUrls').value;
            const imageContainer = document.getElementById('imageContainer');
            
            if (!urlsText.trim()) {
                alert('Por favor, pega las URLs de las imágenes');
                return;
            }
            
            let urls;
            try {
                urls = JSON.parse(urlsText);
            } catch (e) {
                alert('Formato inválido. Asegúrate de que las URLs estén en formato de array JSON.');
                return;
            }
            
            if (!Array.isArray(urls)) {
                alert('El formato debe ser un array de URLs');
                return;
            }
            
            imageContainer.innerHTML = '';
            
            urls.forEach((url, index) => {
                // Solo procesar URLs válidas
                if (!url || typeof url !== 'string') return;
                
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';
                
                const img = document.createElement('img');
                img.src = url;
                img.alt = `Item ${index + 1}`;
                img.onerror = function() {
                    this.style.display = 'none';
                    const errorMsg = document.createElement('p');
                    errorMsg.textContent = 'Error al cargar';
                    errorMsg.style.color = '#ff6b6b';
                    imageItem.appendChild(errorMsg);
                };
                
                // Extraer nombre del archivo de la URL
                const fileName = url.split('/').pop() || `item_${index + 1}`;
                
                const imageName = document.createElement('div');
                imageName.className = 'image-name';
                imageName.textContent = fileName;
                
                imageItem.appendChild(img);
                imageItem.appendChild(imageName);
                imageContainer.appendChild(imageItem);
            });
        }
        
        function clearImages() {
            const imageContainer = document.getElementById('imageContainer');
            imageContainer.innerHTML = '<p id="noImagesMessage">Las imágenes aparecerán aquí después de cargarlas.</p>';
            document.getElementById('imageUrls').value = '';
        }
        
        function downloadAll() {
            const images = document.querySelectorAll('#imageContainer img');
            if (images.length === 0) {
                alert('No hay imágenes para descargar');
                return;
            }
            
            alert(`Se encontraron ${images.length} imágenes. Haz clic derecho en cada imagen y selecciona "Guardar imagen como..." para guardarlas individualmente.`);
            
            // Para imágenes que no se pueden descargar por CORS, proporcionamos enlaces
            const urlsText = document.getElementById('imageUrls').value;
            if (urlsText) {
                try {
                    const urls = JSON.parse(urlsText);
                    console.log('URLs para descargar manualmente:', urls);
                } catch (e) {
                    // Ignorar error de parseo
                }
            }
        }
    </script>
</body>
</html>