<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Datos desde MySQL</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <header class="bg-dark text-white p-3 mb-4">
    <div class="container d-flex justify-content-between align-items-center">
      <h1 class="h3">The Binding of Isaac DB</h1>
      <nav>
        <ul class="nav">
          <li class="nav-item"><a class="nav-link text-white" href="#inicio">Inicio</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#quienes">Quiénes somos</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#servicios">Servicios</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#portafolio">Portafolio</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#contacto">Contacto</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#legal">Legal</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="inicio" class="mb-5">
      <h2>Inicio</h2>
      <p>Bienvenido a la base de datos de The Binding of Isaac. Aquí puedes consultar información de los ítems del juego.</p>
    </section>
    <section id="quienes" class="mb-5">
      <h2>Quiénes somos</h2>
      <p>Somos un equipo apasionado por los videojuegos y la gestión de datos. Nuestra misión es ofrecer información clara y confiable sobre los ítems de Isaac.</p>
    </section>
    <section id="servicios" class="mb-5">
      <h2>Servicios</h2>
      <p>Ofrecemos consulta y filtrado de ítems, visualización de efectos y soporte para jugadores y desarrolladores.</p>
    </section>
    <section id="portafolio" class="mb-5">
      <h2>Portafolio</h2>
      <p>Consulta los ítems y sus efectos. Ejemplo de registros desde MySQL:</p>
      <div class="row" id="cardsContainer"></div>
    </section>
    <section id="contacto" class="mb-5">
      <h2>Contacto</h2>
      <form class="row g-3">
        <div class="col-md-6">
          <label for="nombre" class="form-label">Nombre</label>
          <input type="text" class="form-control" id="nombre" required>
        </div>
        <div class="col-md-6">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" id="email" required>
        </div>
        <div class="col-12">
          <label for="mensaje" class="form-label">Mensaje</label>
          <textarea class="form-control" id="mensaje" rows="3" required></textarea>
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-primary">Enviar</button>
        </div>
      </form>
    </section>
    <section id="legal" class="mb-5">
      <h2>Avisos legales y políticas</h2>
      <p>Privacidad, cookies y términos de uso. Este sitio es solo informativo y no almacena datos personales.</p>
    </section>
  </main>

  <footer class="bg-dark text-white text-center p-3 mt-4">
    <div class="container">
      <nav>
        <ul class="nav justify-content-center">
          <li class="nav-item"><a class="nav-link text-white" href="#inicio">Inicio</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#quienes">Quiénes somos</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#servicios">Servicios</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#portafolio">Portafolio</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#contacto">Contacto</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="#legal">Legal</a></li>
        </ul>
      </nav>
      <small>&copy; 2025 The Binding of Isaac DB. Todos los derechos reservados.</small>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    async function cargarDatos() {
      try {
        const res = await fetch('/api/datos');
        const datos = await res.json();

        const contenedor = document.getElementById('cardsContainer');
        datos.forEach(item => {
          const card = document.createElement('div');
          card.className = 'card col-md-4 mb-3';
          // Obtener el nombre del archivo de la imagen desde sprite_Path
          let imgName = '';
          if (item.sprite_Path) {
            const parts = item.sprite_Path.split('/');
            imgName = parts[parts.length - 1];
          }
          const imgUrl = imgName ? `https://tboi.com/images/items/${imgName}` : '';
          card.innerHTML = `
            <img src="${imgUrl}" alt="${item.item_Name}" class="card-img-top p-2" style="max-height:120px;object-fit:contain;" onerror="this.style.display='none'">
            <div class="card-body">
              <h5 class="card-title">${item.item_Name}</h5>
              <h6 class="card-subtitle mb-2 text-muted">ID: ${item.item_ID}</h6>
              <p class="card-text">${item.descriptionShown}</p>
            </div>
          `;
          contenedor.appendChild(card);
        });
      } catch (error) {
        console.error('Error al cargar los datos:', error);
      }
    }
    cargarDatos();
  </script>
</body>
</html>
